@model EvidenceZakazekWebApp.ViewModels.CrudTableViewModel
@{
    ViewBag.Title = Model.Heading;
}

@section AddToHead{
    @Styles.Render("~/bundles/datatables-css")
}

@helper btnFactory(string classes, string glyphName) {
    <button type="button" class="btn btn-default btn-xs @classes "><span class="glyphicon glyphicon-@glyphName "></span></button>
}

<h2>@Model.Heading</h2>

<table class="table table-striped table-bordered dataTable no-footer crudTable" data-controller-name="@Model.ControllerName">
    <thead>
        <tr>
            <th>id</th>
            @foreach (var ColumnName in Model.CrudRowViewModels.FirstOrDefault().ColumnNames)
            {
                <th>@ColumnName</th>
            }
            <th>Akce</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var CrudRowViewModel in Model.CrudRowViewModels)
        {
            <tr>
                @* Pokud se to povede pres JS, je mozne tento sloupec odstranit a ulehcit si praci s jeho skryvanim *@
                <td>@CrudRowViewModel.Id</td>

                @foreach (var property in CrudRowViewModel.Properties)
                {
                    <td>@property.Value</td>
                }

                <td data-itemId="@CrudRowViewModel.Id" >
                    @btnFactory("btn-warning js-btn-edit", "pencil")
                    @btnFactory("btn-danger js-btn-delete", "remove")
                    @btnFactory("btn-info js-btn-detail", "info-sign")
                </td>
            </tr>
        }
    </tbody>
</table>


@section scripts
{
    <script>
        $(document).ready(function () {
            var controllerName = $(".table").attr("data-controller-name");

            CrudTableController.init(controllerName);
        });
    </script>
}


